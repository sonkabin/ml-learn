# 概率论与统计

## 皮尔逊相关系数

### 结论

数据标准化（$\mu=0, \sigma=1$）后，Pearson相关性系数、Cosine相似度、欧式距离的平方可认为是等价的。换句话说，如果你的数据符合正态分布或者经过了标准化处理，那么这三种度量方法输出等价。

### 与其他两种计算方式的区别

欧式距离和余弦相关相似度无法考虑不同变量间取值的差异（举个例子，变量a取值范围是0至1，而变量b的取值范围是0至10000，计算欧式距离时变量b上微小的差异就会决定运算结果）。**Pearson相关性系数提供了对于变量取值范围不同的处理步骤。因此对不同变量间的取值范围没有要求，最后得到的相关性所衡量的是趋势**

### 定义

两个变量之间的协方差和标准差的商
$$
p(X,Y) = \frac {cov(X,Y)} {\sigma_X \sigma_Y} = \frac{E[(X-\mu_X)(Y-\mu_Y)]}{\sigma_X \sigma_Y} = \frac{E[(X-\mu_X)(Y-\mu_Y)]}{\sqrt{\sum_{i=1}^{n}(X_i - \mu_X)^2} \sqrt{\sum_{i=1}^{n}(Y_i - \mu_Y)^2}} 
$$



## 协方差

表示两个变量总体误差的期望。

期望值为E(X)和E(Y)的两个随机变量的X与Y之间的协方差定义为：cov(X,Y)=E[(X-E(X)) (Y-E(Y))]

### 性质

1. 两个随机变量X和Y相互独立	，则cov(X,Y)=0；若cov(X,Y)不等于0，则X和Y不是相互独立的
2. 与方差的关系：D(X+Y)=D(X)+D(Y)+2cov(X,Y)    D(X-Y)=D(X)+D(Y)-2cov(X,Y)    cov(X,X)=D(X)

### 举例

X = [1,2,3], Y = [5,5,6]

E(X) = (1+2+3)/3=2

E(Y) = (5+5+6)/3=16/3

E(XX) = (1\*1 + 2\*2  + 3\*3)/3 = 14/3

cov(X,X) = E(XX) - E(X)\*E(X) = 14/3 - 4 = 0.6666667 **这是协方差的特殊情况，即方差**

E(XY) = (1\*5 + 2\*5 + 3\*6)/3 = 11

cov(X,Y) = E(XY) - E(X)\*E(Y) = 11 - 32/3 = 0.3333333

### 协方差矩阵

协方差矩阵中的元素计算：$\sum_{ij} = \frac{1}{m-1} (\vec x_i - \mu_x) (\vec y_j - \mu_y)^T $
$$
\sum = \left( \begin{matrix} 
\sum_{11} & \sum_{12} & ... & \sum_{1n} \\
\sum_{21} & \sum_{22} & ... & \sum_{2n} \\
... 									\\
\sum_{m1} & \sum_{m2} & ... & \sum_{mn} \\
\end{matrix} \right)
$$



## 联合分布

- 对于离散随机变量：

  联合分布概率质量函数：$P(X=x \& Y=y) = P(Y=y | X=x)P(X=x) = P(X=x | Y=y)P(Y=y)$

且，$\sum_x \sum_y P(X=x \& Y=y) = 1$ ​	

```latex
例：抛三次硬币，样本空间$\Omega$={hhh, hht, hth, thh, htt, tht,tth,ttt}，在同一样本空间上，定义多个随机变量，如
X：投掷为正面的总数，取值为0，1，2，3
Y：最后一次出现负面，取值为0，1

计算联合分布：
P(X=0, Y=1)=P({ttt}) = 1/8
而P(X=0 | Y=1)P(Y=1) = 1/4 * 1/2   			P(Y=1 | X=0)P(X=0)=1 * 1/8

P(X=1, Y=1)=P({htt, tht})=2/8
P(X=1 | Y=1)P(Y=1) = 2/4 * 1/2 				 P(Y=1 | X=1)P(X=1)=2/3 * 3/8
```

- 对于连续随机变量：

  联合分布概率密度函数：$f_{X,Y}(x,y)$,其中$f_{Y|X}(y|x)$和$f_{X|Y}(x|y)$分别代表X=x时Y的条件分布以及Y=y时x的条件分布，$f_X(x)$ 和$f_Y(y)$分别代表X和Y的边缘分布



## 期望值

一个离散性随机变量的期望值（或数学期望、**均值**）：$E(X) = \sum_{i=1}^{k} x_i p_i$

注意：期望值不一定包含在变量的输出集合中

如果$A_i$是有限集，则$E(X)=\sum_i E(X|A_i)P(A_i)$

## 条件期望

若数字是偶数则A取1，若数字是素数则B取1

|      | 1    | 2    | 3    | 4    | 5    | 6    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| A    | 0    | 1    | 0    | 1    | 0    | 1    |
| B    | 0    | 1    | 1    | 0    | 1    | 0    |

E(A) = (0+1+0+1+0+1)/6=1/2

条件期望：E(A | B=1) = (1+0+0)/3=1/3，E(A | B=0)=(0+1+1)/3=2/3

​		   E(B | A=0) = (0+1+1)/3=2/3，E(B | A=1)=(1+0+0)/3=1/3

**结论**：E(X|Y)是在Y的取值（即y的函数）上求期望，$E(X|Y)=\sum_i x_i p(x_i|Y=y)$

